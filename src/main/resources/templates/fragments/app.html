<!DOCTYPE html>
<html>
    <head th:fragment="head(title)" th:remove="tag">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
        <title th:text="${title}">Title</title>
        <link rel="stylesheet" type="text/css" th:href="@{/static/css/main.css}">
        <script defer src="//use.fontawesome.com/releases/v5.8.1/js/all.js"
            integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
            crossorigin="anonymous"></script>
        <script type="text/javascript">
            function toggleAccountDropdownMenu() {
                var element = document.getElementById("ni-account-dropdown-menu");
                element.classList.toggle("dm-visible");
            }

            window.addEventListener("click", function (e) {
                if (!Element.prototype.matches) {
                    // IE fix.
                    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
                }
                if (e.target.matches(".nia-dropdown-toggle")) {
                    return;
                }
                var dmenu = document.getElementById("ni-account-dropdown-menu");
                if (dmenu.classList.contains("dm-visible")) {
                    dmenu.classList.remove("dm-visible");
                }
            });
        </script>
    </head>
    <body>
        <div th:fragment="master-head" th:remove="tag">
            <noscript>You must have JavaScript enabled for this page to function properly.</noscript>
            <header id="master-head">
                <div class="nav-action-group nag-left">
                    <a href="/" class="nav-item">
                        <img id="mh-logo" th:src="@{/static/images/logo-with-text.png}" alt="logo" />
                    </a>
                    <!-- TODO: MOBILE BACK BUTTON THINGY -->
                </div>
                <!-- TODO SEARCH BAR-->
                <div class="nav-item">
                    <form th:action="@{/}" th:method="POST">
                        <div class="form-group" style="display:inline;">
                            <input type="text" class="form-element fe-credentials-input" name="name"
                                placeholder="Etsi käyttäjiä" autocomplete="off" required />
                            <!-- div class="floating-fe-label">Käyttäjätunnus</div -->
                        </div>
                        <div class="fsubmit-button-wrapper" style="display:inline;">
                            <input type="submit" class="fsubmit-button" value="Hae" />
                        </div>
                    </form>
                </div>
                <!-- TODO SEARCH BAR-->
                <div class="nav-action-group nag-right">
                    <div class="nav-item">
                        <!-- TODO ONLY SHOW ON MOBILE -->
                        <button type="submit" class="ni-action"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="nav-item ni-relative">
                        <div class="ni-account">
                            <img th:src="@{/static/images/Portrait_placeholder.png}" alt="Profile picture" />
                            <span onclick="toggleAccountDropdownMenu();"
                                class="fas fa-chevron-down ni-action nia-dropdown-toggle"></span>
                        </div>
                        <div id="ni-account-dropdown-menu">
                            <div class="dm-account">
                                <img th:src="@{/static/images/Portrait_placeholder.png}" alt="Profile picture" />
                                <a href="#" class="dma-profile-info">
                                    <h1 th:text="${username}">username</h1>
                                    <p th:text="${profileTag}">profileTag</p>
                                </a>
                            </div>
                            <a href="#"><i class="fas fa-user"></i>Sivuni</a>
                            <a href="#"><i class="fas fa-user-friends"></i>Kaverit</a>
                            <a href="#"><i class="fas fa-images"></i>Albumi</a>
                            <a href="#"><i class="fas fa-cog"></i>Asetukset</a>
                            <form th:action="@{/api/auth/logout}" th:method="POST">
                                <button type="submit"><i class="fas fa-sign-out-alt"></i>Kirjaudu ulos</button>
                            </form>
                        </div>
                    </div>
                </div>
            </header>
        </div>
        <main>
            <!-- TODO -->
        </main>
        <footer th:fragment="master-footer" id="master-footer">
            <h3>WORK IN PROGRESS University of Helsinki<br>Web-palvelinohjelmointi projekti, Spring 2019</h3>
        </footer>
    </body>
</html>